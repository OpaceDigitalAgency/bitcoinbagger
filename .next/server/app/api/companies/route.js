"use strict";(()=>{var e={};e.id=623,e.ids=[623],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},295:e=>{e.exports=import("cheerio")},8910:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{originalPathname:()=>m,patchFetch:()=>p,requestAsyncStorage:()=>u,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var i=a(9303),o=a(8716),s=a(670),n=a(2356),c=e([n]);n=(c.then?(await c)():c)[0];let l=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/companies/route",pathname:"/api/companies",filename:"route",bundlePath:"app/api/companies/route"},resolvedPagePath:"/Users/davidbryan/Dropbox/Opace-Sales-Marketing/BitcoinBagger/src/app/api/companies/route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:h}=l,m="/api/companies/route";function p(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}r()}catch(e){r(e)}})},2356:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{GET:()=>n});var i=a(7070),o=a(295),s=e([o]);async function n(e){try{let e=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd",{headers:{"User-Agent":"BitcoinBagger/1.0",Accept:"application/json"}});if(!e.ok)throw Error(`Failed to fetch Bitcoin price: ${e.status}`);let t=(await e.json()).bitcoin.usd,a=await fetch("https://bitcointreasuries.net/",{headers:{"User-Agent":"BitcoinBagger/1.0",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"}});if(!a.ok)throw Error(`Failed to fetch treasury data: ${a.status}`);let r=await a.text(),s=o.load(r),n=[];return s("table tbody tr").each((e,a)=>{let r=s(a).find("td");if(r.length>=6){let e=s(r[0]).text().trim(),a=s(r[1]).text().trim(),i=s(r[2]).text().trim(),o=parseFloat(i.replace(/,/g,""))||0;a&&o>0&&n.push({ticker:a.toUpperCase(),name:e,btcHeld:o,btcValue:o*t,businessModel:"Public Company",btcRole:"Treasury Asset",rank:n.length+1})}}),i.NextResponse.json(n.slice(0,20),{headers:{"Cache-Control":"public, s-maxage=300, stale-while-revalidate=600"}})}catch(e){return console.error("Error fetching companies data:",e),i.NextResponse.json({error:"Unable to fetch companies data. Please try again later."},{status:503,headers:{"Cache-Control":"no-cache"}})}}o=(s.then?(await s)():s)[0],r()}catch(e){r(e)}})}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,972],()=>a(8910));module.exports=r})();